# ============================================
# Debezium Server Configuration for PostgreSQL
# ============================================

# ========== Sink Configuration ==========
# Redis sink configuration
debezium.sink.type=redis
debezium.sink.redis.address=redis:6379
debezium.sink.redis.password=11111111
debezium.sink.redis.key.prefix=cdc:${debezium.source.database.server.name}:
debezium.sink.redis.format=json
debezium.sink.redis.batch.size=1000
debezium.sink.redis.flush.interval.ms=1000

# ========== Source Configuration ==========
# PostgreSQL source configuration
debezium.source.connector.class=io.debezium.connector.postgresql.PostgresConnector
debezium.source.database.hostname=postgres
debezium.source.database.port=5432
debezium.source.database.user=debezium
debezium.source.database.password=11111111
debezium.source.database.dbname=appdb
debezium.source.database.server.name=pg-server-1

# PostgreSQL specific configuration
debezium.source.plugin.name=pgoutput
debezium.source.slot.name=debezium_slot
debezium.source.publication.name=debezium_pub
debezium.source.slot.drop.on.stop=false

# ========== Table Filtering ==========
# Monitor all tables in public schema
debezium.source.schema.include.list=public
debezium.source.table.include.list=public.*

# ========== Snapshot Configuration ==========
debezium.source.snapshot.mode=initial
debezium.source.snapshot.fetch.size=1024
debezium.source.snapshot.lock.timeout.ms=10000

# ========== Connector Configuration ==========
debezium.source.max.batch.size=2048
debezium.source.max.queue.size=8192
debezium.source.poll.interval.ms=1000
debezium.source.heartbeat.interval.ms=10000
debezium.source.heartbeat.topics.prefix=__debezium-heartbeat

# ========== Error Handling ==========
debezium.source.errors.max.retries=-1
debezium.source.errors.retry.delay.initial.ms=300
debezium.source.errors.retry.delay.max.ms=10000

# ========== Offset Storage ==========
debezium.source.offset.storage=org.apache.kafka.connect.storage.FileOffsetBackingStore
debezium.source.offset.storage.file.filename=/debezium/data/offsets.dat
debezium.source.offset.flush.interval.ms=60000

# ========== Logging ==========
quarkus.log.level=INFO
quarkus.log.category."io.debezium".level=DEBUG
